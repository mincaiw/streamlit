
# 코드 구현 기능 설명

### 1. 교수 요구사항 충족 기능

1. **지도에서 위치 표시 및 클릭 선택**

   * `folium`과 `streamlit_folium`을 사용해 지도를 화면에 출력.
   * 사용자가 지도 위의 임의 위치를 클릭하면, 클릭한 위도/경도 좌표를 자동으로 캡처.
   * Kakao 역지오코딩 API를 이용해 해당 좌표를 한글 주소로 변환해 페이지에 실시간 표시.

2. **민원 내용 입력 및 날짜 선택**

   * `st.text_area`를 통해 민원 상세 내용을 입력받음.
   * `st.date_input`으로 민원 발생 날짜를 선택(기본값은 오늘 날짜).

3. **제출자(작성자) 입력**

   * `st.text_input`을 통해 제출자(작성자) 이름을 입력(선택사항).

4. **민원 유형 선택**

   * 드롭다운(`st.selectbox`)으로 민원 유형(교통 불편, 환경 문제, 시설 개선, 안전 문제, 기타 건의) 중 하나를 선택.

5. **Google Sheets에 데이터 저장**

   * 입력받은 민원 데이터(고유 ID, 제목, 내용, 날짜, 좌표, 제출자, 유형, 주소 등)를 Google Sheets에 저장.
   * Google Sheets에 저장된 전체 민원을 불러와 앱에서 실시간으로 출력.

6. **민원 목록(리스트) 표시**

   * 모든 민원 데이터를 리스트로 보여주고, 제출자 이름으로 검색/필터링 가능.
   * 각 항목마다 제목, 내용, 날짜, 유형, 주소 등 주요 정보 상세 출력.

7. **지도에서 민원 마커 및 유형별 색상 표시**

   * 지도 위에 민원 위치를 유형별로 다른 색상 아이콘으로 표시.
   * 여러 건이 모여 있을 때는 `MarkerCluster`로 클러스터링하여 시각적으로 한눈에 보기 쉽게 구성.

8. **유형별/날짜별 통계 시각화**

   * **유형별 통계**: 각 민원 유형별 비율을 파이차트(원형 그래프)로 시각화.
   * **날짜별 통계**: 날짜별 민원 건수를 막대그래프로 일 단위로 정확하게 표시.

9. **추천(좋아요) 기능**

   * 각 민원별로 '추천(👍)' 버튼이 노출되고, 버튼 클릭 시 추천수가 1씩 증가.
   * 추천수는 Google Sheets에도 실시간 반영.

10. **민원 처리 상태 관리**

    * '처리완료' 버튼 클릭 시 상태가 '처리완료'로 변경되고, 리스트/상세뷰에서 바로 확인 가능.

---

### 2. 추가 구현된 기능

* **민원 카테고리별 아이콘 색상 지정**
* **지도에서 MarkerCluster 활용, 유형별 색상 분류**
* **추천수 저장/갱신 및 실시간 동기화**
* **민원 상태(미해결/처리완료)별 필터 기능**
* **matplotlib 한글 폰트 설정 및 통계 그래프 한글 라벨 지원**

---

### 3. 추가 개발 예정/확장 기능

1. **사용자별 민원 1건당 1회 추천 제한**

   * 세션 혹은 브라우저 쿠키를 기반으로 중복 추천 방지.

2. **민원 제목 필드 강화**

   * 민원 등록 시 제목/내용을 모두 입력받고, 목록/통계/랭킹에 제목과 함께 표시.

3. **추천 랭킹 기능**

   * 추천수 순으로 모든 민원 리스트를 정렬, 제목 및 세부정보 보기 기능 제공.

---

# 필수 라이브러리 설치 방법

아래 명령어로 환경 구성:

```bash
pip install streamlit pandas gspread oauth2client requests folium streamlit-folium matplotlib
```

---

# Google Sheets 연동 및 권한 설정 안내

1. Google Cloud 콘솔에서 프로젝트 생성 후 Google Sheets API 활성화.
2. 서비스 계정 생성, JSON 키(예: `token.json`) 다운로드.
3. Google Sheets 문서에서 '공유' 버튼 클릭 → 서비스 계정 메일 추가 → 편집 권한 부여.
4. `token.json` 파일을 코드 파일과 동일한 폴더에 배치.
5. 실행 시 `token.json` 경로 및 네트워크 연결을 반드시 확인.
